<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <script id="shader-vs" type="x-shader/x-vertex">
            attribute vec2 my_pos;

            uniform mat4 perspective;
            uniform mat4 model;
			uniform vec3 color;

			varying highp vec3 f_color;

            void main() {
                gl_Position = perspective * model * vec4(my_pos, 0.0, 1.0);
				f_color = color;
            }
        </script>

        <script id="shader-fs" type="x-shader/x-fragment">
			varying highp vec3 f_color;

            void main() {
                gl_FragColor = vec4(f_color, 1.0);
            }
        </script>

        <link href="style.css" rel="stylesheet">
        <script src="sylvester.js"></script>
        <script src="glUtils.js"></script>
        <script src="wotb.js"></script>
        <script src="color_table.js"></script>
        <script src="vm.js"></script>
    </head>
    <body onload="start_memvm()">
        <div style="text-align: center; padding-bottom: 5em; padding-top: 1em;">
            <h1>MemoryVM v0.6</h1>
			<h4>Instructions are formatted [op][operand]</h4>
			<p>Your URL is your saved program. Hold onto it, or share it with friends!</p>
			<div class="container">
				<div>
					<div style="padding-bottom: 1em">
						<button onclick="step()">Step</button>
						<button onclick="pause()">Go/Stop</button>
						<button onclick="reset()">Reset</button>
						<button onclick="clear_board()">Clear</button>
					</div>
					<div>
						<div style="margin-bottom:-512px;">
							<canvas id="glcanvas" width="512" height="512">NOT SUPPORT!</canvas>
						</div>
						<canvas id="text" width="512" height="512">NOT SUPPORT!</canvas>
					</div>
					<p id="reg">Register A: 0 Register B: 0</p>
						<table id="inputs">
							<thead><tr><th>User Input</th><th>Function</th></tr></thead>
							<tr><td>click</td><td>select tile</td></tr>
							<tr><td>double click</td><td>edit tile</td></tr>
							<tr><td>enter</td><td>exit edit mode</td></tr>
						</table>
				</div>
				<div>
					<table id="op_table">
						<thead><tr><th>Value</th><th>Instruction</th><th>Description</th></tr></thead>
						<tr><td>0</td><td>NOP</td><td>Do nothing; <em>Only 1 block, no operand</em></td></tr>
						<tr><td>1</td><td>JMP</td><td>Move program counter to block at operand value address</td></tr>
						<tr><td>2</td><td>LOAD A</td><td>Load operand value into register A</td></tr>
						<tr><td>3</td><td>LOAD B</td><td>Load operand value into register B</td></tr>
						<tr><td>4</td><td>STORE A</td><td>Store register A value into operand value address</td></tr>
						<tr><td>5</td><td>STORE B</td><td>Store register B value into operand value address</td></tr>
						<tr><td>6</td><td>ADDI A</td><td>Add operand value to register A</td></tr>
						<tr><td>7</td><td>ADDI B</td><td>Add operand value to register B</td></tr>
						<tr><td>8</td><td>SUBI A</td><td>Subtract operand value from register A value, store in register A</td></tr>
						<tr><td>9</td><td>SUBI B</td><td>Subtract operand value from register B value, store in register B</td></tr>
						<tr><td>10</td><td>JZ A</td><td>Jump to operand address if register A value is zero</td></tr>
						<tr><td>11</td><td>JZ B</td><td>Jump to operand address if register B value is zero</td></tr>
						<tr><td>12</td><td>JG A B</td><td>Jump to operand address if register A value is greater than register B value</td></tr>
						<tr><td>13</td><td>JG B A</td><td>Jump to operand address if register value is greater than register A value</td></tr>
						<tr><td>14</td><td>JL A B</td><td>Jump to operand address if register A value is less than register B value</td></tr>
						<tr><td>15</td><td>JL B A</td><td>Jump to operand address if register B value is less than register A value</td></tr>
						<tr><td>16</td><td>JE A B</td><td>Jump to operand address if register A value is equal to register B value</td></tr>
						<tr><td>17</td><td>RELJMP</td><td>Jump to program counter plus operand value</td></tr>
						<tr><td>18</td><td>NOT A</td><td>Bitwise not register A value into register A; <em>Only 1 block, no operand</em></td></tr>
						<tr><td>19</td><td>NOT B</td><td>Bitwise not register B value into register B; <em>Only 1 block, no operand</em></td></tr>
						<tr><td>20</td><td>AND A</td><td>Bitwise and register A value and operand value into register A</td></tr>
						<tr><td>21</td><td>AND B</td><td>Bitwise and register B value and operand value into register B</td></tr>
						<tr><td>22</td><td>OR A</td><td>Bitwise or register A value and operand value into register A</td></tr>
						<tr><td>23</td><td>OR B</td><td>Bitwise or register B value and operand value into register B</td></tr>
						<tr><td>24</td><td>XOR A</td><td>Bitwise xor register A value and operand value into register A</td></tr>
						<tr><td>25</td><td>XOR B</td><td>Bitwise xor register B value and operand value into register B</td></tr>
						<tr><td>26</td><td>SHL A</td><td>Shift register A value left 1 bit, operand value times</td></tr>
						<tr><td>27</td><td>SHL B</td><td>Shift register B value left 1 bit, operand value times</td></tr>
						<tr><td>28</td><td>SHR A</td><td>Shift register A value right 1 bit, operand value times, propagating 0</td></tr>
						<tr><td>29</td><td>SHR B</td><td>Shift register B value right 1 bit, operand value times, propagating 0</td></tr>
						<tr><td>30</td><td>SWP A B</td><td>Swap register A and B; <em>Only 1 block, no operand</em></td></tr>
						<tr><td>31</td><td>LOADI A</td><td>Load value at operand value address into register A</td></tr>
						<tr><td>32</td><td>LOADI B</td><td>Load value at operand value address into register B</td></tr>
						<tr><td>33</td><td>ADD A B</td><td>Add register A and register B, store in register A</td></tr>
						<tr><td>34</td><td>SUB A B</td><td>Subtract register A from register B, store in register A</td></tr>
						<tr><td>35</td><td>SUB B A</td><td>Subtract register B from register A, store in register B</td></tr>
						<tr><td>36</td><td>INC A</td><td>Increment A; <em>Only 1 block, no operand</em></td></tr>
						<tr><td>37</td><td>INC B</td><td>Increment B; <em>Only 1 block, no operand</em></td></tr>
						<tr><td>38</td><td>DEC A</td><td>Decrement A; <em>Only 1 block, no operand</em></td></tr>
						<tr><td>39</td><td>DEC B</td><td>Decrement B; <em>Only 1 block, no operand</em></td></tr>
						<tr><td>40</td><td>HALT</td><td>Halt the running program; <em>Only 1 block, no operand</em></td></tr>
					</table>
				</div>
			</div>
        </div>
    </body>
</html>
